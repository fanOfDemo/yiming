<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="æ¶è¡¥åŸºç¡€çŸ¥è¯†ä¸­...">
<meta property="og:type" content="website">
<meta property="og:title" content="yiming">
<meta property="og:url" content="http://fanofdemo.github.io/index.html">
<meta property="og:site_name" content="yiming">
<meta property="og:description" content="æ¶è¡¥åŸºç¡€çŸ¥è¯†ä¸­...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="yiming">
<meta name="twitter:description" content="æ¶è¡¥åŸºç¡€çŸ¥è¯†ä¸­...">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":5},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://fanofdemo.github.io/"/>





  <title> yiming </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">yiming</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">ä¸‰è¨€ä¸¤è¯­çš„ä¸ªäººå¤‡å¿˜</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            åˆ†ç±»
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            æ ‡ç­¾
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            å…³äº
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            å…¬ç›Š404
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://fanofdemo.github.io/2016/12/13/APPæ’ä»¶åŒ–æ¨¡å—è§£è€¦äºŒ/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="yiming">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://tc.sinaimg.cn/maxwidth.2048/tc.service.weibo.com/p/mmbiz_qpic_cn/1f005a6a2af0cfd626f3b5cefb3e4617.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="yiming">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="yiming" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/13/APPæ’ä»¶åŒ–æ¨¡å—è§£è€¦äºŒ/" itemprop="url">
                  APPæ’ä»¶åŒ–æ¨¡å—è§£è€¦äºŒ
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              <time title="Ğ”Ğ°Ñ‚Ğ° ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸" itemprop="dateCreated datePublished" datetime="2016-12-13T16:12:13+08:00">
                Dec 13 2016
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2016/12/13/APPæ’ä»¶åŒ–æ¨¡å—è§£è€¦äºŒ/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/12/13/APPæ’ä»¶åŒ–æ¨¡å—è§£è€¦äºŒ/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="http://wengyiming.cn/2016/12/05/APP%E6%8F%92%E4%BB%B6%E5%8C%96%E6%A8%A1%E5%9D%97%E8%A7%A3%E8%80%A6%E4%B8%80/" target="_blank" rel="external">ç³»åˆ—åšå®¢ï¼ŒAPPæ’ä»¶åŒ–ä¸šåŠ¡è§£è€¦ä¸€</a></p>
<p>åŸºäºä¸Šç¯‡ä¸ç³»ç»Ÿçš„ç†è®ºè¯´å®Œåï¼Œè¿™ç¯‡æ˜¯å®è·µç¯‡.</p>
<p>æˆ‘ä»¬å…ˆåˆ†æä¸€ä¸‹å¸¸è§„appç»“æ„ï¼Œ</p>
<p>æ­£å¸¸appæ¨¡å—ç»“æ„ï¼š</p>
<ul>
<li>root gradle<ul>
<li>app</li>
<li>librarya</li>
<li>libraryb</li>
</ul>
</li>
</ul>
<p>æ’ä»¶åŒ–åçš„ç»“æ„</p>
<ul>
<li>app<ul>
<li>assets    <ul>
<li>plugina-&gt;librarya  </li>
<li>pluginb-&gt;libraryb</li>
</ul>
</li>
</ul>
</li>
<li><p>plugina-wrap </p>
<ul>
<li>librarya</li>
</ul>
</li>
<li><p>pluginb-wrap</p>
<ul>
<li>libraryb</li>
</ul>
</li>
</ul>
<p>å‚è€ƒç¤ºä¾‹å›¾ï¼š</p>
<p><img src="http://ww1.sinaimg.cn/mw690/6cf2ea6agw1fapapos1s4j21340py0yo.jpg" width="640"></p>
<p><a href="https://github.com/fanOfDemo/PluginApp/blob/master/pic/app_module.png" target="_blank" rel="external">ç¤ºä¾‹å›¾</a></p>
<p>åºŸè¯ä¸è¯´äº†ï¼Œç›´æ¥ä¸Šä»£ç </p>
<p>å°†gradle.propertiesä¸­isDebugè®¾ç½®ä¸ºtrueï¼Œ</p>
<pre><code><span class="setting">isDebug = <span class="value"><span class="keyword">true</span></span></span>
</code></pre><p>pluginAWrapå’ŒpluginBWrapæ˜¯ç‹¬ç«‹çš„applicationï¼Œå¯ä»¥ç›´æ¥è¿è¡Œå®‰è£…è¿è¡Œï¼Œæµ‹è¯•æ’ä»¶æ¨¡å—ï¼Œä¹Ÿå°±æ˜¯å¯¹åº”çš„libraryçš„åŠŸèƒ½</p>
<p>å°†gradle.propertiesä¸­isDebugè®¾ç½®ä¸ºfalseï¼Œ</p>
<pre><code><span class="setting">isDebug = <span class="value"><span class="keyword">false</span></span></span>
</code></pre><p>åªéœ€è¦æ‰§è¡Œå¯¹åº”çš„build taskï¼Œç›´æ¥è¾“å‡º<code>æ‰©å±•åä¸ºjarçš„apk</code>åˆ°appçš„assetsä¸‹ä½œä¸ºå®¿ä¸»çš„æ’ä»¶è¿è¡Œ</p>
<p>æ ¸å¿ƒé…ç½®åªæœ‰å‡ è¡Œä»£ç ï¼Œ<a href="https://github.com/fanOfDemo/PluginApp/blob/master/plugina_wrap/build.gradle" target="_blank" rel="external">plugina_wrap é¡¹ç›®çš„gradleå…³é”®é…ç½®</a>ï¼š</p>
<pre><code><span class="keyword">import</span> com.android.build.gradle.api.ApkVariant

apply plugin: <span class="string">'com.android.application'</span>

android {

    <span class="keyword">sourceSets</span> {
        main {
            <span class="keyword">if</span> (isDebug.toBoolean()) {
                manifest.srcFile <span class="string">'src/main/debug/AndroidManifest.xml'</span>
                java.srcDirs = [<span class="string">'src/main/java'</span>]
            } <span class="keyword">else</span> {
                manifest.srcFile <span class="string">'src/main/release/AndroidManifest.xml'</span>
                java.srcDirs = [<span class="string">'src/main/plugin/'</span>]
            }
            assets.srcDirs = [<span class="string">'src/main/assets'</span>, <span class="string">'src/main/assets/'</span>]
        }
    }

    aaptOptions.additionalParameters <span class="string">'--PLUG-resoure-id'</span>, <span class="string">'0x42'</span>
}


<span class="keyword">dependencies</span> {
    <span class="keyword">if</span> (isDebug.toBoolean()) {
        <span class="keyword">compile</span> <span class="keyword">fileTree</span>(dir: <span class="string">'libs'</span>, <span class="keyword">include</span>: [<span class="string">'*.jar'</span>])
    } <span class="keyword">else</span> {
        provided <span class="keyword">fileTree</span>(dir: <span class="string">'libs'</span>, <span class="keyword">include</span>: [<span class="string">'*.jar'</span>])
    }
    <span class="keyword">compile</span> <span class="keyword">project</span>(<span class="string">':librarya'</span>)
}


<span class="keyword">def</span> nameMap = <span class="string">'pluginA.jar'</span>
<span class="keyword">if</span> (!isDebug.toBoolean()) {
    android.applicationVariants.all { ApkVariant variant -&gt;
        <span class="keyword">def</span> buildTypeName = variant.buildType.name
        <span class="keyword">def</span> <span class="keyword">task</span> = <span class="keyword">project</span>.tasks.create <span class="string">"jar${buildTypeName.capitalize()}"</span>, Jar
        <span class="keyword">task</span>.archiveName = nameMap
        <span class="keyword">println</span> <span class="string">'______________________________\n__\n\n__________'</span> + <span class="keyword">task</span>.archivePath
        <span class="keyword">task</span>.dependsOn variant.javaCompiler
        <span class="keyword">task</span>.outputs.upToDateWhen { <span class="keyword">false</span> }
        <span class="keyword">task</span>.<span class="keyword">from</span> variant.javaCompiler.<span class="keyword">destinationDir</span>
        <span class="keyword">task</span>.<span class="keyword">destinationDir</span> = <span class="keyword">file</span>(<span class="string">'../'</span> + <span class="string">'app/src/main/assets'</span>)
        <span class="keyword">artifacts</span>.add(<span class="string">'archives'</span>, <span class="keyword">task</span>)
    }
}
</code></pre><p><a href="https://github.com/fanOfDemo/PluginApp" target="_blank" rel="external">æœ¬æ–‡æºç åœ°å€ï¼šPluginApp</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://fanofdemo.github.io/2016/12/05/APPæ’ä»¶åŒ–æ¨¡å—è§£è€¦ä¸€/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="yiming">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://tc.sinaimg.cn/maxwidth.2048/tc.service.weibo.com/p/mmbiz_qpic_cn/1f005a6a2af0cfd626f3b5cefb3e4617.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="yiming">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="yiming" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/05/APPæ’ä»¶åŒ–æ¨¡å—è§£è€¦ä¸€/" itemprop="url">
                  APPæ’ä»¶åŒ–æ¨¡å—è§£è€¦ä¸€
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              <time title="Ğ”Ğ°Ñ‚Ğ° ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸" itemprop="dateCreated datePublished" datetime="2016-12-05T23:10:36+08:00">
                Dec 5 2016
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2016/12/05/APPæ’ä»¶åŒ–æ¨¡å—è§£è€¦ä¸€/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/12/05/APPæ’ä»¶åŒ–æ¨¡å—è§£è€¦ä¸€/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="ä¸€ã€ä½¿ç”¨æ’ä»¶åŒ–å¯¹appæ¨¡å—æ‹†åˆ†çš„èƒŒæ™¯">ä¸€ã€ä½¿ç”¨æ’ä»¶åŒ–å¯¹appæ¨¡å—æ‹†åˆ†çš„èƒŒæ™¯</h2><p>ä¸Šæ¬¡å†™äº†ä¸€ç¯‡SDKçƒ­æ›´æ–°çš„è®¾è®¡ä¸å®è·µï¼Œå’Œæœ¬æ–‡æ’ä»¶åŒ–æŠ€æœ¯ç‚¹æ˜¯ä¸€æ ·çš„ï¼Œä¸è¿‡çƒ­æ›´æ–°SDKæ˜¯ç‹¬ç«‹äº§å“ï¼Œå¹¶æ²¡æœ‰é€šç”¨æ€§ï¼Œéƒ¨åˆ†åŒå­¦çœ‹å®Œåå»ºè®®æˆ‘å†™ç¯‡é€šç”¨æ€§çš„æ–‡ç« è®²è®²æ’ä»¶åŒ–æŠ€æœ¯åœ¨APPä¸šåŠ¡æ¨¡å—è§£è€¦çš„å®è·µã€‚</p>
<p>ä¸€ä¸ªappéšç€ä¸šåŠ¡ä»£ç é‡å‰§å¢ï¼Œéƒ½æ— å¯é¿å…çš„ä¼šé‡åˆ°æ–°çš„é—®é¢˜ã€‚</p>
<p>å¸¸è§çš„é—®é¢˜ä¸»è¦æœ‰ï¼š</p>
<ul>
<li><p>ä¸€ã€åœ¨å…¼å®¹androidä½ç‰ˆæœ¬ï¼ˆanroid4.4ä»¥ä¸‹ï¼‰æ—¶å‡ºç°æ–¹æ³•ä¹¦çˆ†æ£šï¼Œè¿™ä¸ªæ­¤å¤„ä¸åšè¿‡å¤šè§£é‡Šã€‚</p>
</li>
<li><p>äºŒã€åœ¨é‡åˆ°ä¸Šè¿°é—®é¢˜åé‡‡ç”¨androidå®˜æ–¹æä¾›çš„mutildexæ–¹æ¡ˆæ—¶ï¼Œå„ä¸šåŠ¡æ¨¡å—ä¾èµ–å¤æ‚ï¼Œå ªç§°ä¾èµ–åœ°ç‹±ï¼Œæ—©æœŸæ¶æ„è®¾è®¡å¹¶æ²¡æœ‰è€ƒè™‘åˆ°è¿™ç§å¤æ‚çš„æ‰¿è½½é‡åæœŸæ–°ä¸šåŠ¡å¤ªå¤šæ²¡æœ‰æ—¶é—´é‡æ„å¯¼è‡´è§£è€¦è®¾è®¡å¤ªå·®ï¼Œä»£ç shitä¸€æ ·ä¸å ªå…¥ç›®æ›´ä¸å ªç»´æŠ¤</p>
</li>
<li><p>ä¸‰ã€åŸºäºç¬¬äºŒæ¡çš„è§£å†³æ–¹æ¡ˆæ˜¯åŸºäºmoduleçš„å¸¸è§„ç»„ä»¶åŒ–ï¼Œä¾èµ–å’Œè§£è€¦åšåˆ°äº†ï¼Œæ¨¡å—ä¹Ÿç‹¬ç«‹äº†ï¼Œä¸šåŠ¡ä¸Šåšåˆ°äº†è§£è€¦ï¼Œä½†é‡å¤ä¾èµ–çš„æœ¬è´¨é—®é¢˜ä¾èµ–æ²¡æœ‰è§£å†³ã€‚</p>
</li>
<li><p>å››ã€åŸºäºå¸¸è§„ç»„ä»¶åŒ–åï¼Œå¤§éƒ¨åˆ†å¤æ‚ä¾èµ–å…³ç³»çš„è§£æå·¥ä½œä¾ç„¶æ˜¯äº¤ç»™äº†buildToolsï¼ŒåŠ¿å¿…è¿˜æ˜¯å¡å¡å¡ï¼ˆæ­¤å¤„è™½æœ‰åŠæ³•ä¼˜åŒ–ä¸€éƒ¨åˆ†ï¼Œä½†æˆæœ¬è¾ƒé«˜ï¼Œå¾—ä¸å¿å¤±ï¼‰ï¼Œä½¿ç”¨ç»„ä»¶åŒ–åä¾ç„¶éš¾ä»¥é¿å…å®¿ä¸»ç¼–è¯‘æ—¶é—´çš„é­”å’’ï¼Œé¡¹ç›®ä»£ç é‡è¿‡å¤§ï¼Œé¡¹ç›®ç¼–è¯‘æ—¶é—´ä»1åˆ†é’Ÿç¼–ç¨‹2-5åˆ†é’Ÿï¼Œå³ä½¿å¼€å¯äº†install runé€Ÿåº¦ä¾ç„¶æ²¡æœ‰æ˜¾è‘—æå‡</p>
</li>
</ul>
<p>PS:å°é“æ¶ˆæ¯ï¼Œå¬è¯´æ–°ç‰ˆçš„install runå’Œandroid studio2.3æ¨å‡ºåç¼–è¯‘é€Ÿåº¦ä¼šå¾—åˆ°æ˜¾è‘—æ”¹å–„ï¼ˆä¾æˆ‘ç»éªŒçœ‹ï¼Œè‡ªas1.5ä¹‹åè¶Šæ¥è¶Šå¡çš„å°¿æ€§ï¼Œå¹¶ä¸å¤ªçœ‹å¥½ï¼‰</p>
<p>åŸºäºä»¥ä¸ŠåŸå› ï¼Œæ’ä»¶åŒ–èƒ½å®Œç¾çš„è§£å†³ä¸Šè¿°æ‰€æœ‰é—®é¢˜ï¼Œè¾¾åˆ°æœ€ç»ˆæ•ˆæœæ˜¯</p>
<ul>
<li><p>ä¸€ã€æ— éœ€å…³å¿ƒæ–¹æ³•æ•°ï¼Œæ— ç¼å…¼å®¹androidä½çº§ç‰ˆæœ¬</p>
</li>
<li><p>äºŒã€æ— éœ€å…³å¿ƒæ¨¡å—çš„å†…éƒ¨å®ç°ï¼Œåªéœ€è¦äº†è§£å¦‚ä½•è¾“å…¥å¦‚ä½•è¾“å‡ºï¼ˆè·¯ç”±è·³è½¬ï¼‰</p>
</li>
<li><p>ä¸‰ã€æ— éœ€å…³å¿ƒé‡å¤ä¾èµ–ï¼Œå’Œå¸¸è§„å¼€å‘åŸºæœ¬æ— å¼‚</p>
</li>
<li><p>å››ã€ç»æ€æŠ€ï¼ï¼ï¼äº§å“ç»ç†æœ€çˆ±ï¼šä¿®BUGï¼ŒåŠ¨æ€å‘å¸ƒç‰ˆæœ¬</p>
</li>
</ul>
<h2 id="äºŒã€æ’ä»¶åŒ–ã€ç»„ä»¶åŒ–ã€å®¿ä¸»ã€æ’ä»¶åˆ†åˆ«æ˜¯å•¥">äºŒã€æ’ä»¶åŒ–ã€ç»„ä»¶åŒ–ã€å®¿ä¸»ã€æ’ä»¶åˆ†åˆ«æ˜¯å•¥</h2><p>1ã€æ’ä»¶åŒ–æŠ€æœ¯ä¸­æœ‰ä»€ä¹ˆæœ¯è¯­ï¼Ÿææ¸…æ¥šå®¿ä¸»å’Œæ’ä»¶çš„å…³ç³»ï¼Œ</p>
<pre><code>å®¿ä¸»ï¼šéœ€è¦ç¼–è¯‘æ‰“åŒ…å‘å¸ƒçš„

æ’ä»¶ï¼šéœ€è¦å†…ç½®æˆ–è€…åŠ¨æ€ä¸‹è½½ï¼ŒåŠ¨æ€å®‰è£…çš„
</code></pre><p>2ã€æ¨¡å—è§£è€¦æœ‰ä»€ä¹ˆæœ¯è¯­</p>
<ul>
<li><p>æ’ä»¶åŒ–ï¼šæ’ä»¶åŒ–æ˜¯ä¸€ç§æŠ€æœ¯æœ¯è¯­ï¼Œandroidç³»ç»Ÿçš„è®¾è®¡å°±æ˜¯å®Œå…¨çš„C/Sæ¶æ„ï¼Œåº”ç”¨å±‚æ˜¯å®Œå…¨çš„æ’ä»¶åŒ–è®¾è®¡çš„ï¼Œæ¯”å¦‚launcheræ˜¯å®¿ä¸»ï¼Œæ‰€æœ‰å®‰è£…çš„appéƒ½æ˜¯æ’ä»¶ï¼Œç³»ç»Ÿè‡ªå¸¦çš„appå°±æ˜¯å†…ç½®æ’ä»¶ï¼Œç”¨æˆ·å®‰è£…çš„appå°±æ˜¯è¿è¡Œæ—¶å®‰è£…çš„æ’ä»¶ã€‚</p>
</li>
<li><p>å¸¸è§„ç»„ä»¶åŒ–ï¼šç»„ä»¶åŒ–åœ¨androidæŠ€æœ¯å‘å±•è¿‡ç¨‹ä¸­è¿˜å±äºæ–°è¯ï¼Œä¸»è¦æ˜¯ä¸šå†…å¤§ä½¬å› ä¸ºandroidå®˜æ–¹çš„æ”¯æŒæ„ˆå‘ç»™åŠ›è€Œå¯¹é»‘ç§‘æŠ€çš„æ’ä»¶åŒ–çš„å—¤ä¹‹ä»¥é¼»äº§ç”Ÿçš„æ–°çš„è§£è€¦æ€è·¯ï¼Œå…¶å®å’Œæ’ä»¶åŒ–æ˜¯ä¸å†²çªçš„ï¼Œè¿™é‡Œæˆ‘æŠŠè¿™ä¸ªç»„ä»¶åŒ–å«åšå¸¸è§„ç»„ä»¶åŒ–ï¼Œå°±æ˜¯ä¸ä½¿ç”¨ä»»ä½•é»‘ç§‘æŠ€æ‰‹æ®µè¾¾åˆ°çš„è§£è€¦çš„ä¸€ç§æ€è·¯ï¼Œæœ¬æ–‡åæœŸè¯´çš„ç»„ä»¶åŒ–éƒ½æ˜¯æŒ‡å¸¸è§„æ‰‹æ®µçš„ç»„ä»¶åŒ–ã€‚</p>
</li>
<li><p>åŸºäºæ’ä»¶åŒ–çš„ç»„ä»¶åŒ–ï¼šå°±æ˜¯åœ¨å¸¸è§„ç»„ä»¶åŒ–åå¯¹æ¨¡å—ç»„ä»¶è¿›è¡Œæ’ä»¶åŒ–</p>
</li>
</ul>
<h2 id="ä¸‰ã€æ‰‹æ‘¸æ‰‹æ•™ä½ è§£è€¦ç¬¬ä¸€æ­¥ï¼šä½¿ç”¨å¸¸è§„ç»„ä»¶åŒ–æ€æƒ³è¿›è¡Œè§£è€¦">ä¸‰ã€æ‰‹æ‘¸æ‰‹æ•™ä½ è§£è€¦ç¬¬ä¸€æ­¥ï¼šä½¿ç”¨å¸¸è§„ç»„ä»¶åŒ–æ€æƒ³è¿›è¡Œè§£è€¦</h2><p>2ã€å¸¸è§„çš„appæœ‰å“ªäº›ä¸šåŠ¡æ¨¡å—å‘¢ï¼Ÿ</p>
<p>æˆ‘å…ˆä¸¾ä¸ªğŸŒ°ï¼Œå¸¸è§çš„appä¸€èˆ¬æœ‰ï¼šç™»å½•ã€æ”¯ä»˜ã€åˆ†äº«ã€æ¨é€ã€ä¸šåŠ¡1ï¼Œä¸šåŠ¡2ç­‰ï¼Œçœ‹çœ‹ä½ çš„appæœ‰æ²¡æœ‰è¿™äº›æ¨¡å—ï¼Œ</p>
<ul>
<li><p>ç¡®å®šæ¨¡å—å…¥å£activityæˆ–è€…serviceçš„åŒ…åå’Œclassåï¼Œå¹¶æœ€å¥½æ°¸è¿œéƒ½ä¸è¦æ”¹è¿™ä¸ªåå­—</p>
</li>
<li><p>ç¡®å®šé€šè®¯åè®®ï¼Œå°½å¯èƒ½ä½¿ç”¨androidç³»ç»Ÿè‡ªå¸¦çš„é€šè®¯åè®®ï¼Œéè·¨è¿›ç¨‹çš„å»ºè®®ä½¿ç”¨intentä¼ å€¼ä½œä¸ºå…¥å‚ï¼Œä½¿ç”¨startActivityForResultä½œä¸ºå›è°ƒï¼Œå¦‚æœä½¿ç”¨äº†è·¨è¿›ç¨‹é€šè®¯ï¼Œå°†serverçš„serviceæ”¾åœ¨appçš„moudleçš„manifestè¿›è¡Œé¢„åŸ‹ï¼Œå®ç°å¯ä»¥æ”¾åœ¨å®¿ä¸»ä¹Ÿå¯ä»¥æ”¾åœ¨æ’ä»¶ï¼Œå»ºè®®æ”¾åœ¨æœ‰å†…ç½®ç‰ˆæœ¬çš„æ’ä»¶ä¸­ï¼Œå°†clientæ”¾åœ¨å„libçš„moudleå®ç°ã€‚</p>
</li>
<li><p>ä½¿ç”¨mutildexæ–¹æ¡ˆä½œä¸ºè¿‡æ¸¡åŠæ³•è¿›è¡Œå¸¸è§„ç»„ä»¶åŒ–ï¼Œè¿™é‡Œå¯ä»¥å‚è€ƒé­”éƒ½ä¸‰å¸…çš„ç³»åˆ—æ–‡ç« ï¼Œåé¢æˆ‘ä¹Ÿä¼šå°†ï¼Œå¹¶åˆ†äº«ä¸€äº›gradleçš„å°æ’ä»¶å¸®åŠ©ç»„ä»¶åŒ–è‡ªåŠ¨åŒ–</p>
</li>
<li><p>æœ€åä½¿ç”¨åå°„å°‘é‡ç³»ç»ŸAPIå’Œå°‘é‡ä»£ç†å®ç°çš„æ’ä»¶åŒ–æ¡†æ¶ï¼Œå®¹æ˜“ä¸Šæ‰‹çš„æ¯”å¦‚<a href="https://github.com/iReaderAndroid/ZeusPlugin" target="_blank" rel="external">zeusPlugin</a>å¯¹ç»„ä»¶åŒ–åçš„å­æ¨¡å—è¿›è¡Œæ’ä»¶åŒ–ï¼Œæœ¬æ–‡åç»­æ–‡ç« ä¼šåŸºäºzeusPluginè¿›è¡Œè®²è§£</p>
</li>
</ul>
<p>ä¸å¥½æ„æ€ï¼Œè¿™ç¯‡å°±å½“ç»™æ–°äººæ™®åŠä¸€ä¸‹åŸºç¡€ç†è®ºçŸ¥è¯†ï¼Œæˆ‘ä»¬ä¸‹ä¸€ç¯‡å†æ‰‹æ‘¸æ‰‹ä»ä»£ç ä¸Šè®²è§£æ€ä¹ˆå°†ç™»å½•æ¨¡å—è¿›è¡Œå¸¸è§„ç»„ä»¶åŒ–å¹¶æ’ä»¶åŒ–å§,è¿™ç¯‡çº¯æ–‡å­—æˆ‘éƒ½å†™äº†ä¸€å°æ—¶ï¼Œå†™æ–‡ç« å¾ˆèŠ±æ—¶é—´çš„,æ‰€ä»¥æƒ³çœ‹ä»£ç çš„å†ç­‰ç­‰äº†</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://fanofdemo.github.io/2016/11/02/ä½¿ç”¨System-nanoTimeæµ‹è¯•ä»£ç æ‰§è¡Œæ—¶é—´/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="yiming">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://tc.sinaimg.cn/maxwidth.2048/tc.service.weibo.com/p/mmbiz_qpic_cn/1f005a6a2af0cfd626f3b5cefb3e4617.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="yiming">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="yiming" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/11/02/ä½¿ç”¨System-nanoTimeæµ‹è¯•ä»£ç æ‰§è¡Œæ—¶é—´/" itemprop="url">
                  ä½¿ç”¨System.nanoTimeæµ‹è¯•ä»£ç æ‰§è¡Œæ—¶é—´
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              <time title="Ğ”Ğ°Ñ‚Ğ° ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸" itemprop="dateCreated datePublished" datetime="2016-11-02T23:09:35+08:00">
                Nov 2 2016
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2016/11/02/ä½¿ç”¨System-nanoTimeæµ‹è¯•ä»£ç æ‰§è¡Œæ—¶é—´/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/11/02/ä½¿ç”¨System-nanoTimeæµ‹è¯•ä»£ç æ‰§è¡Œæ—¶é—´/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>ä¹‹å‰å†™æ’ä»¶ä¸‹è½½çš„è¿‡ç¨‹ä¸­é‡åˆ°è¿‡ä¸€ä¸ªå¾ˆç»†èŠ‚çš„çŸ¥è¯†ç‚¹ã€‚</p>
<p>ä¸šåŠ¡åœºæ™¯æ˜¯è¿™æ ·çš„ï¼ŒAPPå¯åŠ¨åçš„ç¬¬ä¸€æ—¶é—´åšæ£€æŸ¥å¹¶ä¸‹è½½æ–°ç‰ˆæ’ä»¶ï¼Œæ¯”å¦‚å½“å‰ç½‘é€Ÿæ˜¯æ¯ç§’20kè€Œæ’ä»¶çš„å¤§å°æ˜¯600K,æ„å‘³ç€éœ€è¦ç­‰å¾…30sç”¨æˆ·æ‰èƒ½åšä¸‹ä¸€æ­¥æ“ä½œï¼Œå¾ˆæ˜æ˜¾è¿™ä¸ªæ—¶é—´æ˜¯éå¸¸ä¸åˆç†çš„ã€‚æœ‰ä»€ä¹ˆåŠæ³•åšä¸€ä¸ªè¶…æ—¶è§¦å‘ï¼Ÿå½“ç„¶æœ‰ï¼</p>
<p>äºæ˜¯ï¼Œæˆ‘åœ¨å¼€å§‹ä¸‹è½½çš„ä½ç½®è·å–äº†ç³»ç»Ÿçš„æ—¶é—´æˆ³ï¼Œè¿™ä¸ªæ—¶é—´æˆ³æ˜¯ä»1970å¹´å¼€å§‹ç®—çš„æ¯«ç§’æ—¶é—´æˆ³ï¼Œå¹¶ä¸”ä¼—æ‰€å‘¨çŸ¥è¿™ä¸ªæ—¶é—´æˆ³å¯ä»¥è½¬æ¢æˆå¯¹åº”çš„æ—¥æœŸå°æ—¶åˆ†é’Ÿç§’æ¯«ç§’</p>
<pre><code><span class="keyword">long</span> startTime = System.currentTimeMillis;
</code></pre><p>åœ¨æ¯æ¬¡è¯»å–æœåŠ¡å™¨æ–‡ä»¶æµæ—¶ï¼Œåšäº†ä¸€ä¸ªå‡æ³•è®¡ç®—è€—æ—¶ï¼Œ</p>
<pre><code>long delyTime = System<span class="class">.currentTimeMillis</span> - startTime
</code></pre><p>åˆ¤æ–­delyTimeæ˜¯å¦å¤§äº20sï¼Œå¦‚æœå¤§äº20sï¼Œè§¦å‘ä¸€ä¸ªä¸‹è½½è¶…æ—¶ï¼Œå–æ¶ˆæœ¬æ¬¡æ›´æ–°ã€‚</p>
<p>OKï¼Œä»ä¸Šæ–‡çœ‹ï¼Œæ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œéå¸¸å®Œç¾è§£å†³äº†é—®é¢˜ã€‚</p>
<p>å¤§ç¥è¯´äº†ï¼Œçœ‹ä¼˜ç§€æ¡†æ¶çš„æºç æ‰èƒ½çœŸæ­£è¿›æ­¥ã€‚å‰äº›å¤©ä¸å°å¿ƒçœ‹äº†Picassoçš„æºç ï¼Œçœ‹åˆ°<code>into(Callback callback)</code>æ–¹æ³•é‡Œï¼Œ<code>RequestCreator</code>çš„<code>fetch()</code>æ–¹æ³•æœ‰è¿™ä¹ˆä¸€è¡Œï¼Œå¥‡æ€ªè¿™ç©æ„æ˜¯å•¥ï¼Œ</p>
<pre><code><span class="keyword">long</span> started = System.nanoTime();
</code></pre><p>ç„¶å<code>Request</code>æœ‰è¿™ä¹ˆä¸€ä¸ªæ–¹æ³•ï¼Œ å·®ä¸å¤šæ‡‚äº†</p>
<pre><code><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> TOO_LONG_LOG = TimeUnit.SECONDS.toNanos(<span class="number">5</span>);

<span class="function">String <span class="title">logId</span><span class="params">()</span> </span>{
    <span class="keyword">long</span> delta = System.nanoTime() - started;
    <span class="keyword">if</span> (delta &gt; TOO_LONG_LOG) {
          <span class="keyword">return</span> plainId() + <span class="string">'+'</span> + TimeUnit.NANOSECONDS.toSeconds(delta) + <span class="string">'s'</span>;
    }
    <span class="keyword">return</span> plainId() + <span class="string">'+'</span> + TimeUnit.NANOSECONDS.toMillis(delta) + <span class="string">"ms"</span>;

  }
</code></pre><p> è¿›ä¸€æ­¥é˜…è¯»java APIå‘ç°ï¼š</p>
<pre><code><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">long</span> nanoTime()
</code></pre><p>è¿”å›æœ€å‡†ç¡®çš„å¯ç”¨ç³»ç»Ÿè®¡æ—¶å™¨çš„å½“å‰å€¼ï¼Œä»¥æ¯«å¾®ç§’ä¸ºå•ä½ã€‚</p>
<p>æ­¤æ–¹æ³•åªèƒ½ç”¨äºæµ‹é‡å·²è¿‡çš„æ—¶é—´ï¼Œä¸ç³»ç»Ÿæˆ–é’Ÿè¡¨æ—¶é—´çš„å…¶ä»–ä»»ä½•æ—¶é—´æ¦‚å¿µæ— å…³ã€‚è¿”å›å€¼è¡¨ç¤ºä»æŸä¸€å›ºå®šä½†ä»»æ„çš„æ—¶é—´ç®—èµ·çš„æ¯«å¾®ç§’æ•°ï¼ˆæˆ–è®¸ä»ä»¥åç®—èµ·ï¼Œæ‰€ä»¥è¯¥å€¼å¯èƒ½ä¸ºè´Ÿï¼‰ã€‚æ­¤æ–¹æ³•æä¾›æ¯«å¾®ç§’çš„ç²¾åº¦ï¼Œä½†ä¸æ˜¯å¿…è¦çš„æ¯«å¾®ç§’çš„å‡†ç¡®åº¦ã€‚å®ƒå¯¹äºå€¼çš„æ›´æ”¹é¢‘ç‡æ²¡æœ‰ä½œå‡ºä¿è¯ã€‚åœ¨å–å€¼èŒƒå›´å¤§äºçº¦ 292 å¹´ï¼ˆ263 æ¯«å¾®ç§’ï¼‰çš„è¿ç»­è°ƒç”¨çš„ä¸åŒç‚¹åœ¨äºï¼šç”±äºæ•°å­—æº¢å‡ºï¼Œå°†æ— æ³•å‡†ç¡®è®¡ç®—å·²è¿‡çš„æ—¶é—´ã€‚</p>
<p>ä¾‹å¦‚ï¼Œæµ‹è¯•æŸäº›ä»£ç æ‰§è¡Œçš„æ—¶é—´é•¿åº¦ï¼š</p>
<pre><code><span class="keyword">long</span> startTime = System.nanoTime();
<span class="comment">// ... the code being measured ...</span>
<span class="keyword">long</span> estimatedTime = System.nanoTime() - startTime;
</code></pre><p>è¿”å›ï¼š<br>ç³»ç»Ÿè®¡æ—¶å™¨çš„å½“å‰å€¼ï¼Œä»¥æ¯«å¾®ç§’ä¸ºå•ä½ã€‚æ³¨æ„è¿™é‡Œè¯´çš„è±ªå¾®ç§’ï¼Œä¹Ÿå°±æ˜¯çº³ç§’ï¼Œ</p>
<p>åˆ°è¿™é‡Œå‘ç°å‰é¢è§‰å¾—å®Œç¾çš„ä»£ç æœ‰ä»€ä¹ˆé—®é¢˜äº†å—ï¼Œæ²¡é”™å°†æ—¥æœŸå¯¹åº”çš„æ¯«ç§’æ—¶é—´æˆ³æ”¹æˆç²¾ç¡®è®¡æ—¶çš„çº³ç§’æ—¶é—´èƒ½æ›´å‡†ç¡®è®¡ç®—å‡ºä»£ç æ‰§è¡Œçš„è€—æ—¶ã€‚</p>
<p>å‚è€ƒï¼š</p>
<p><a href="https://github.com/fanOfDemo/picasso/blob/master/picasso/src/main/java/com/squareup/picasso/RequestCreator.java" target="_blank" rel="external">picasso/RequestCreator.java</a></p>
<p><a href="https://github.com/fanOfDemo/picasso/blob/master/picasso/src/main/java/com/squareup/picasso/Request.java" target="_blank" rel="external">picasso/Request.java</a></p>
<p><a href="http://www.cnblogs.com/_programmer/p/3396933.html" target="_blank" rel="external">javaä¸­çš„System.nanoTimeä¸System.currentTimeçš„åŒºåˆ«</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://fanofdemo.github.io/2016/10/21/çƒ­æ›´æ–°SDKçš„è®¾è®¡ä¸å®è·µ/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="yiming">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://tc.sinaimg.cn/maxwidth.2048/tc.service.weibo.com/p/mmbiz_qpic_cn/1f005a6a2af0cfd626f3b5cefb3e4617.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="yiming">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="yiming" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/21/çƒ­æ›´æ–°SDKçš„è®¾è®¡ä¸å®è·µ/" itemprop="url">
                  çƒ­æ›´æ–°SDKçš„è®¾è®¡ä¸å®è·µ
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              <time title="Ğ”Ğ°Ñ‚Ğ° ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸" itemprop="dateCreated datePublished" datetime="2016-10-21T23:45:22+08:00">
                Oct 21 2016
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2016/10/21/çƒ­æ›´æ–°SDKçš„è®¾è®¡ä¸å®è·µ/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/10/21/çƒ­æ›´æ–°SDKçš„è®¾è®¡ä¸å®è·µ/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>è·ç¦»ä¸Šæ¬¡å†™æ–‡ç« æœ‰å¥½ä¸€æ®µæ—¶é—´äº†ï¼Œä¹‹å‰è®²è¿‡è®¾è®¡æ¨¡å¼å’Œæ’ä»¶åŒ–ï¼Œä»Šå¤©æ¥åˆ†äº«ä¸ªå®ç”¨çš„ä¸œè¥¿ã€‚</p>
<p><a href="http://wengyiming.cn/2016/07/07/andorid%E6%8F%92%E4%BB%B6%E5%8C%96%E7%A0%94%E7%A9%B6/" target="_blank" rel="external">æ’ä»¶åŒ–åˆ†æä¸ç ”ç©¶</a>     è¿™ç¯‡æ–‡ç« å†™çš„æ—¶å€™åªæ˜¯ç®€å•çš„è¿›è¡Œæ˜“ç”¨æ€§å¯¹æ¯”ï¼Œå¹¶æœªæ·±å…¥çš„è®²è§£æ€ä¹ˆåº”ç”¨åœ¨å®é™…é¡¹ç›®ï¼›</p>
<p>ä»Šå¤©æˆ‘ä»¬ç”¨ä¸€ä¸ªæ–°çš„é¡¹ç›®ç»“åˆç­–ç•¥è€…æ¨¡å¼å¼€å‘ä¸€ä¸ªçƒ­æ›´æ–°çš„SDKåŠŸèƒ½ï¼Œåœ¨æ—©ä¹‹å‰è¿™å°±æ˜¯androidç»„ä»¶åŒ–äº†</p>
<p>ç°åœ¨çš„ç»„ä»¶åŒ–ç ”ç©¶å¯ä»¥çœ‹<a href="http://kymjs.com/code/2016/10/18/01" target="_blank" rel="external">Androidä¸šåŠ¡ç»„ä»¶åŒ–å¼€å‘å®è·µ</a> ï¼Œå¤§å¸…çš„<a href="https://zhuanlan.zhihu.com/p/23147164?from=timeline&amp;isappinstalled=1" target="_blank" rel="external">ä»é›¶å¼€å§‹çš„Androidæ–°é¡¹ç›®11 - ç»„ä»¶åŒ–å®è·µï¼ˆ1ï¼‰</a></p>
<p>å›åˆ°æˆ‘çš„è¯é¢˜ï¼Œé€ è½¦å­éœ€è¦è½®å­å’Œå›¾çº¸ï¼š</p>
<p>è½®å­ä¸€ï¼š<a href="http://www.jianshu.com/p/b1e7b6326330" target="_blank" rel="external">ZeusPlugin:æŒé˜…Android Appæ’ä»¶è¡¥ä¸å®è·µ</a>å²ä¸Šæœ€æ˜“ä¸Šæ‰‹çš„æ’ä»¶åŒ–è½®å­</p>
<p>å›¾çº¸äºŒï¼šç­–ç•¥è€…æ¨¡å¼çš„åº”ç”¨<br>,ä¹‹å‰åšå®¢æˆ‘ä»‹ç»è¿‡ç­–ç•¥è€…æ¨¡å¼å’Œå•ä¾‹æ¨¡å¼åœ¨SDKçš„åº”ç”¨ï¼Œ<a href="http://wengyiming.cn/2016/06/14/android%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E8%AE%B2%E8%A7%A3%EF%BC%88%E4%B8%80%EF%BC%89%E2%80%94%E2%80%94%E7%AD%96%E7%95%A5%E8%80%85%E6%A8%A1%E5%BC%8F/" target="_blank" rel="external">androidä¸­å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼è®²è§£ï¼ˆä¸€ï¼‰â€”â€”ç­–ç•¥è€…æ¨¡å¼.md</a></p>
<p><a href="http://wengyiming.cn/2016/06/15/android%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E8%AE%B2%E8%A7%A3%EF%BC%88%E4%BA%8C%EF%BC%89%E2%80%94%E2%80%94%E8%A7%A3%E5%AF%86%E5%90%84%E7%A7%8D%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/" target="_blank" rel="external">androidä¸­å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼è®²è§£ï¼ˆäºŒï¼‰â€”â€”è§£å¯†å„ç§å•ä¾‹æ¨¡å¼</a></p>
<p>é¦–å…ˆå…ˆè®¾è®¡å‡ºSDKå’Œå®¿ä¸»çš„å…¬å…±éƒ¨åˆ†ï¼Œç›®å‰ZeusPluginæ’ä»¶åŒ–åªèƒ½å¾—åˆ°æ’ä»¶çš„MainClass,ZeusPluginçš„è¿™ä¸ªclassæ˜¯ä¸ªactivityï¼Œå¯æˆ‘çš„SDKä¸æ˜¯activityæ€ä¹ˆè°ƒç”¨è¿™ä¸ªç±»ä»¥åŠè¿™ä¸ªç±»çš„æ–¹æ³•å†…ï¼Œæœ‰ä¸¤ä¸ªåŠæ³•ï¼Œ</p>
<ul>
<li>1ï¼šé€šè¿‡åå°„è°ƒç”¨è¿™ä¸ªç±»çš„æ–¹æ³•ï¼Œç„¶åä½¿ç”¨åå°„ä¼ å‚</li>
<li><p>2ï¼šä½¿ç”¨å…¬å…±æ¥å£ï¼Œå®¿ä¸»å’Œæ’ä»¶éƒ½èƒ½è¯†åˆ«çš„æ¥å£ï¼ˆinterfaceï¼‰</p>
</li>
<li><p>åå°„ï¼šç¼ºç‚¹å’Œè§£å†³æ–¹æ³•ï¼šå‡å¦‚æˆ‘ä»¬çš„SDKçš„æ¥å£æ–¹æ³•æ¯”è¾ƒå¤šï¼Œä½¿ç”¨åå°„æ˜æ˜¾æ˜¯éå¸¸ä½æ•ˆçš„ï¼Œä»£ç é‡å¤§ï¼ˆå·¥å…·ç±»å¯ä»¥å‡å°‘ä»£ç é‡ï¼‰ï¼Œæ€§èƒ½ä¸é«˜ï¼ˆåšç‚¹cacheï¼‰ï¼Œæ’ä»¶å®¹æ˜“ä¸å°å¿ƒæ”¹åŠ¨æ¥å£ä»£ç ã€‚</p>
</li>
<li><p>æ¥å£ï¼šåªéœ€è¦ä¸€è¡Œä»£ç å°±å¯ä»¥è·å–åˆ°æ¥å£çš„å®ä¾‹ï¼Œæ— åå°„ç›´æ¥è°ƒç”¨å®ä¾‹æ–¹æ³•ï¼Œæ¥å£å›ºå®šéš¾ä»¥æ›´æ”¹ã€‚</p>
</li>
</ul>
<p>ä»¥ä¸Šæ˜¯å‡†å¤‡æ¡†æ¶å’Œç†è®ºå·¥ä½œï¼Œç°åœ¨å›åˆ°ä¸šåŠ¡ï¼Œå‡å¦‚æˆ‘ä»¬ç°åœ¨æœ‰ä¸¤ä¸ªæ¸¸æˆå¹³å°çš„ä¸šåŠ¡ï¼Œè¿™é‡Œå«Aæ¸¸æˆï¼ŒBæ¸¸æˆ<br>ï¼Œä»–ä»¬éƒ½æœ‰å›ºå®šçš„æ¥å£å¯¹å¤–ï¼Œä½†æ˜¯å†…éƒ¨å®ç°ä¸ä¸€æ ·ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å…ˆæŠ½è±¡ä¸€ä¸ªæ¥å£</p>
<pre><code><span class="keyword">public</span> interface IGameAPI {

    <span class="keyword">void</span> init (<span class="keyword">JSONObject</span> jsonObject, ValueCallback&lt;<span class="keyword">JSONObject</span>&gt; valueCallback);

    <span class="keyword">void</span> login (<span class="keyword">JSONObject</span> jsonObject, ValueCallback&lt;<span class="keyword">JSONObject</span>&gt; valueCallback);

    <span class="keyword">void</span> pay (<span class="keyword">JSONObject</span> jsonObject, ValueCallback&lt;<span class="keyword">JSONObject</span>&gt; valueCallback);

    <span class="keyword">void</span> logout (<span class="keyword">JSONObject</span> jsonObject, ValueCallback&lt;<span class="keyword">JSONObject</span>&gt; valueCallback);

}
</code></pre><p>å…¬å…±æ¥å£ä¸€å¼€å§‹å¯ä»¥å†™åœ¨sdkçš„å®ç°moduleä¸­ï¼Œä»£ç å†™å®Œåå°†è¯¥æ¥å£æ–‡ä»¶ç§»åˆ°zeusPluginä¸­ï¼Œå°†zeusPluginæ‰“åŒ…æˆjarï¼Œæä¾›ç»™SDK moduleä»¥providedå½¢å¼ä¾èµ–ï¼ˆåªå‚ä¸ç¼–è¯‘ä¸å‚ä¸æ‰“åŒ…ï¼‰ï¼ŒåŒæ—¶ä½œä¸ºå®¿ä¸»çš„compile(å¯ä½œä¸ºç¼–è¯‘åŠæ‰“åŒ…),è¿™æ ·æ’ä»¶å’Œå®¿ä¸»éƒ½èƒ½è¯†åˆ«ä½¿ç”¨å…±åŒçš„æ¥å£ï¼Œä¹‹åå¯ä»¥å°†sdkmoduleä¸­çš„ç›¸å…³å…¬å…±æ¥å£ä»£ç æ³¨é‡Šæˆ–åˆ é™¤ï¼Œå¹¶å°†æ¥å£çš„å®ç°æ”¹æˆjarä¸­çš„æ¥å£ï¼Œå®¿ä¸»è´Ÿè´£è°ƒç”¨ï¼Œæ’ä»¶è´Ÿè´£å®ç°ï¼Œä»è€Œå®ç°äº†SDKçš„çƒ­æ›´æ–°ï¼Œæ³¨æ„è¿™ä¸ªæ¥å£è¦ä¿è¯å°½å¯èƒ½å…¼å®¹åˆ°æ‰€æœ‰çš„ä¸šåŠ¡åŠŸèƒ½ï¼Œä¸ç„¶è¿™ä¸ªçƒ­æ›´æ–°å°±æ²¡ä»€ä¹ˆæ„ä¹‰äº†ã€‚</p>
<p>ç„¶åå†å†™å®ç°å…¬å…±æ¥å£çš„åŒæ—¶ï¼Œå¢åŠ é™æ€ç±»å•ä¾‹æ¨¡å¼ï¼ˆä¸ºä»€ä¹ˆä½¿ç”¨å•ä¾‹ã€æœ‰ä»€ä¹ˆå‘ç¨åå†è®²ï¼‰ï¼Œ<br>A/Bä¸¤ä¸ªå¹³å°çš„æ¸¸æˆSDKçš„ä¸šåŠ¡å®ç°:</p>
<p>AGameAPI</p>
<pre><code><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AGameAPI</span> <span class="keyword">implements</span> <span class="title">IGameAPI</span> </span>{

    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> AGameAPI <span class="title">getAPI</span> <span class="params">()</span> </span>{
        <span class="keyword">return</span> APIHolder.single;
    }

    <span class="function"><span class="keyword">public</span> <span class="title">AGameAPI</span> <span class="params">()</span> </span>{

    }

    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">APIHolder</span> </span>{
        <span class="keyword">static</span> AGameAPI single = <span class="keyword">new</span> AGameAPI ();
    }

    <span class="annotation">@Override</span>
    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span> <span class="params">(JSONObject jsonObject, ValueCallback&lt;JSONObject&gt; valueCallback)</span> </span>{
    }

    <span class="annotation">@Override</span>
    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">login</span> <span class="params">(JSONObject jsonObject, ValueCallback&lt;JSONObject&gt; valueCallback)</span> </span>{

    }

    <span class="annotation">@Override</span>
    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pay</span> <span class="params">(JSONObject jsonObject, ValueCallback&lt;JSONObject&gt; valueCallback)</span> </span>{

    }

    <span class="annotation">@Override</span>
    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">logout</span> <span class="params">(JSONObject jsonObject, ValueCallback&lt;JSONObject&gt; valueCallback)</span> </span>{

    }

}
</code></pre><p>BGameAPI</p>
<pre><code><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BGameAPI</span> <span class="keyword">implements</span> <span class="title">IGameAPI</span> </span>{

    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> AGameAPI <span class="title">getAPI</span> <span class="params">()</span> </span>{
        <span class="keyword">return</span> BGameAPI.APIHolder.single;
    }

    <span class="function"><span class="keyword">public</span> <span class="title">BGameAPI</span> <span class="params">()</span> </span>{

    }

    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">APIHolder</span> </span>{
        <span class="keyword">static</span> AGameAPI single = <span class="keyword">new</span> AGameAPI ();
    }

    <span class="annotation">@Override</span>
    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span> <span class="params">(JSONObject jsonObject, ValueCallback&lt;JSONObject&gt; valueCallback)</span> </span>{

    }

    <span class="annotation">@Override</span>
    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">login</span> <span class="params">(JSONObject jsonObject, ValueCallback&lt;JSONObject&gt; valueCallback)</span> </span>{

    }

    <span class="annotation">@Override</span>
    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pay</span> <span class="params">(JSONObject jsonObject, ValueCallback&lt;JSONObject&gt; valueCallback)</span> </span>{

    }

    <span class="annotation">@Override</span>
    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">logout</span> <span class="params">(JSONObject jsonObject, ValueCallback&lt;JSONObject&gt; valueCallback)</span> </span>{

    }
}
</code></pre><p>ä¸‹ä¸€æ­¥æ˜¯åŸºäºç­–ç•¥è€…æ¨¡å¼åšä¸€ä¸‹åŒ…è£…,è¿™ä¸ªç±»å°±æ˜¯ç­–ç•¥è€…æ¨¡å¼ä¸­è£…è½½ç±»ï¼Œæ ¹æ®ä¸šåŠ¡é€‰æ‹©è£…è½½ä¸åŒçš„å®ä¾‹ï¼Œè¿™é‡Œæˆ‘ä»¬ä¼ªä»£ç å®ç°åŠ è½½æ¸ é“å·ï¼Œ<br>apkäºŒæ¬¡æ‰“åŒ…å†™å…¥æ¸ é“å·å®è·µ<br><a href="http://tech.meituan.com/mt-apk-packaging.html" target="_blank" rel="external">ç¾å›¢Androidè‡ªåŠ¨åŒ–ä¹‹æ—…â€”ç”Ÿæˆæ¸ é“åŒ…</a><br><a href="https://github.com/GavinCT/AndroidMultiChannelBuildTool" target="_blank" rel="external">AndroidMultiChannelBuildTool</a></p>
<p>GameAPILoader</p>
<pre><code><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GameAPILoader</span> <span class="keyword">implements</span> <span class="title">IGameAPI</span> </span>{

    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function">IGameAPI <span class="title">loadGameAPI</span> <span class="params">()</span> </span>{
        <span class="keyword">switch</span> (readChannel ()) {
            <span class="keyword">case</span> <span class="number">1</span>:
                mAPI = AGameAPI.getAPI ();
                <span class="keyword">break</span>;
            <span class="keyword">case</span> <span class="number">2</span>:
                mAPI = BGameAPI.getAPI ();
                <span class="keyword">break</span>;
        }

        <span class="keyword">return</span> mAPI;
    }

    <span class="keyword">private</span> <span class="keyword">static</span> <span class="function"><span class="keyword">int</span> <span class="title">readChannel</span> <span class="params">()</span> </span>{
        <span class="keyword">return</span> <span class="number">1</span>;
    }

    <span class="keyword">private</span> <span class="keyword">static</span> IGameAPI mAPI;


    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">init</span> <span class="params">(JSONObject jsonObject, ValueCallback&lt;JSONObject&gt; valueCallback)</span> </span>{

    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">login</span> <span class="params">(JSONObject jsonObject, ValueCallback&lt;JSONObject&gt; valueCallback)</span> </span>{

    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">pay</span> <span class="params">(JSONObject jsonObject, ValueCallback&lt;JSONObject&gt; valueCallback)</span> </span>{

    }

    <span class="annotation">@Override</span>
    <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">logout</span> <span class="params">(JSONObject jsonObject, ValueCallback&lt;JSONObject&gt; valueCallback)</span> </span>{

    }
}
</code></pre><p>æ’ä»¶æ¥å£å®ç°çš„æœ€åä¸€æ­¥ï¼Œä½ çŒœæ˜¯å¹²å˜›ï¼Œæ²¡é”™å°±æ˜¯ç­–ç•¥è€…æ¨¡å¼çš„çœŸæ­£çš„è€å¤§</p>
<p>GameAPI</p>
<pre><code><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GameAPI</span> <span class="keyword">implements</span> <span class="title">IGameAPI</span> </span>{
    <span class="keyword">private</span> IGameAPI mAPI;

    <span class="function"><span class="keyword">public</span> <span class="title">GameAPI</span> <span class="params">()</span> </span>{
        mAPI = GameAPILoader.loadGameAPI ();
    }

    <span class="annotation">@Override</span>
    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span> <span class="params">(JSONObject jsonObject, ValueCallback&lt;JSONObject&gt; valueCallback)</span> </span>{
        mAPI.init (jsonObject, valueCallback);
    }

    <span class="annotation">@Override</span>
    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">login</span> <span class="params">(JSONObject jsonObject, ValueCallback&lt;JSONObject&gt; valueCallback)</span> </span>{
        mAPI.login (jsonObject, valueCallback);
    }

    <span class="annotation">@Override</span>
    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pay</span> <span class="params">(JSONObject jsonObject, ValueCallback&lt;JSONObject&gt; valueCallback)</span> </span>{
        mAPI.pay (jsonObject, valueCallback);
    }

    <span class="annotation">@Override</span>
    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">logout</span> <span class="params">(JSONObject jsonObject, ValueCallback&lt;JSONObject&gt; valueCallback)</span> </span>{
        mAPI.logout (jsonObject, valueCallback);
    }
}
</code></pre><p>ä»¥ä¸Šä»£ç å…¨éƒ¨éƒ½åœ¨SDKçš„moduleä¸­ï¼Œåˆ°è¿™é‡Œæˆ‘ä»¬çš„æ’ä»¶çš„æ¥å£å®ç°éƒ¨åˆ†å°±å†™å®Œäº†ï¼Œå†™åˆ°è¿™é‡Œå¤§ç‰›ä»¬å·²ç»çœ‹æ‡‚äº†ä¸‹ä¸€æ­¥è¦å¹²å•¥äº†ã€‚æ²¡å…³ç³»è¿™ç¯‡æ–‡ç« ä¸æ˜¯ç»™å¤§ç¥çœ‹çš„ï¼Œä½ ä»¬ä¸€è¾¹ç©å»ï¼Œå†™ç‚¹é«˜çº§çš„å¸¦å¸¦æˆ‘å°±å¥½ã€‚</p>
<p>å›åˆ°éä¸šåŠ¡çš„æŠ€æœ¯ä¸Šæ¥ï¼Œç°åœ¨æˆ‘ä»¬æ–°å»ºä¸€ä¸ªapplicationçš„moduleï¼Œä¸æ˜¯é»˜è®¤appçš„moduleå•Šï¼Œè¿™ä¸ªapplicationçš„moduleè´Ÿè´£æ‰“åŒ…ä¹‹å‰çš„SDKçš„moduleï¼Œä»¥åŠé…ç½®assetsä¸­é…ç½®zeusplugin.metaä¸­çš„å†…å®¹ï¼Œä»¥ä¾›å®¿ä¸»è¯†åˆ«ç‰ˆæœ¬å’Œmainclass</p>
<ul>
<li><p>1ã€é¦–å…ˆå°†æ’ä»¶çš„mainclassæŒ‡å®šä¸ºä½ çš„class</p>
<ul>
<li><p>æ¯”å¦‚æˆ‘è¿™çš„metaé…ç½®æ”¹æˆï¼Œå…¶ä¸­com.ym.game.sdk.GameAPIå°±æ˜¯ä¸Šæ–‡æåˆ°çš„æ¥å£çš„å…·ä½“å®ç°è€…</p>
<pre><code>{
    "<span class="attribute">name</span>": <span class="value"><span class="string">"zeusplugin_asset"</span></span>,
    "<span class="attribute">minVersion</span>": <span class="value"><span class="string">"1"</span></span>,
    "<span class="attribute">version</span>": <span class="value"><span class="string">"1"</span></span>,
    "<span class="attribute">mainClass</span>": <span class="value"><span class="string">"com.ym.game.sdk.GameAPI"</span>
</span>}
</code></pre></li>
</ul>
</li>
</ul>
<p>ä½¿ç”¨zeusæä¾›çš„aaptåˆ¶å®špackageIdæ‰“åŒ…è·‘èµ·æ¥<br>å·²çŸ¥é»˜è®¤çš„appçš„packageIdæ˜¯0x7fï¼Œè¿™é‡Œæˆ‘ä»¬éšä¾¿ç”¨ä¸€ä¸ªä¸å†²çªçš„</p>
<pre><code> //<span class="operator"><span class="keyword">start</span><span class="comment">-----æ’ä»¶ç›¸å…³-------------------</span>
    aaptOptions.additionalParameters <span class="string">'--PLUG-resoure-        proguard'</span>, <span class="string">'--PLUG-resoure-id'</span>, <span class="string">'0x7d'</span>
//<span class="keyword">end</span><span class="comment">-------æ’ä»¶ç›¸å…³-------------------</span></span>
</code></pre><p>æ‰“åŒ…æˆapkä¹‹åæ‹·è´åˆ°å®¿ä¸»ï¼Œæˆ‘è¿™é‡Œå°±æ˜¯é»˜è®¤çš„applicationçš„module appçš„assetsä¸‹ï¼ŒæŠŠæ–‡ä»¶åæ”¹æˆZeusPluginé¡¹ç›®ä¸­çš„PluginConfigç±»ä¸‹åˆ¶å®šçš„åå­—ï¼Œæ¯”å¦‚zeusplugin_test.apk</p>
<pre><code> <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">String</span> PLUGIN_TEST = <span class="string">"zeusplugin_test"</span>;                             <span class="comment">//æ’ä»¶æµ‹è¯•demo</span>
    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">String</span> HOTFIX_TEST = <span class="string">"zeushotfix_test"</span>;                             <span class="comment">//çƒ­ä¿®å¤è¡¥ä¸æµ‹è¯•demo</span>

    <span class="comment">/**
     * apkè‡ªå¸¦çš„æ’ä»¶çš„åˆ—è¡¨ï¼Œæ¯æ¬¡æ·»åŠ å†…ç½®æ’ä»¶çš„æ—¶å€™éœ€è¦æ·»åŠ åˆ°è¿™é‡Œï¼Œæ ¼å¼(pluginName,pluginVersion)
     * pluginVersionä¸€å®šè¦ä¸æ’ä»¶ä¸­PLUGINWEB_MAINIFEST_FILEæ–‡ä»¶é‡Œçš„versionä¿æŒä¸€è‡´ã€‚
     * å¯¹äºæ’ä»¶è¿˜å¯ä»¥ä½¿ç”¨diffè¡¥ä¸çš„å½¢å¼ä¸‹è½½å¢é‡åŒ…ï¼Œè¿™æ ·å¯ä»¥é™ä½æ–‡ä»¶ä¸‹è½½çš„å¤§å°ã€‚
     */</span>
    <span class="keyword">static</span> {
        <span class="comment">//æ’ä»¶å¿…é¡»ä»¥PluginUtil.EXP_PLUG_PREFIXå¼€å¤´ï¼Œå¦åˆ™ä¸ä¼šè¯†åˆ«ä¸ºæ’ä»¶</span>
        mDefaultList.put(PLUGIN_TEST, <span class="number">1</span>);
        <span class="comment">//è¡¥ä¸å¿…é¡»ä»¥EXP_PLUG_HOT_FIX_PREFIXå¼€å¤´</span>
        <span class="comment">//è¿™é‡Œæ˜¯æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ï¼Œä¸€èˆ¬éƒ½ä¸ä¼šå†…ç½®çƒ­ä¿®å¤<span class="doctag"><span class="keyword">bug</span></span> fixæ’ä»¶ï¼Œçƒ­ä¿®å¤æ’ä»¶éƒ½æ˜¯ç½‘ä¸Šä¸‹è½½ï¼Œä¸‹è½½å®Œæˆåæ‰§è¡Œå®‰è£…æ–¹æ³•</span>
        <span class="comment">//ç„¶åå¯åŠ¨çš„æ—¶å€™å°±è‡ªåŠ¨ä¼šåŠ è½½çƒ­ä¿®å¤çš„è¡¥ä¸ï¼Œçƒ­ä¿®å¤è¡¥ä¸ä¸æ”¯æŒè¿è¡Œæ—¶åŠ¨æ€æ›´æ–°ï¼Œå¿…é¡»è½¯ä»¶é‡å¯åæ‰èƒ½ç”Ÿæ•ˆ</span>
        <span class="comment">//å¦åˆ™ä¼šå‡ºç°æœªçŸ¥å¼‚å¸¸ï¼Œåæ­£æ²¡è¯•è¿‡ï¼Œæ„Ÿå…´è¶£å¯ä»¥è¯•è¯•</span>
<span class="comment">//        mDefaultList.put(HOTFIX_TEST, 1);</span>
    }
</code></pre><p>   åˆ°è¿™é‡Œçƒ­æ›´æ–°SDKåŸºæœ¬åšå®Œäº†ï¼Œä¸‹ä¸€æ­¥æ˜¯æ€ä¹ˆè°ƒç”¨äº†ï¼Œç›´æ¥çœ‹ä»£ç ï¼š</p>
<pre><code>String className = PluginManager.getPlugin <span class="params">(PluginConfig.PLUGIN_TEST)</span>.getPluginMeta <span class="params">()</span>
                    .mainClass;
    PluginManager.loadLastVersionPlugin <span class="params">(PluginConfig.PLUGIN_TEST)</span>;
        try {
                Class cl = PluginManager.mNowClassLoader.loadClass <span class="params">(className)</span>;
                IGameAPI gameAPI = <span class="params">(IGameA<span class="literal">PI</span>)</span> cl.newInstance <span class="params">()</span>;

                gameAPI.init <span class="params">(null, new ValueCallback&lt;JSONObject&gt; <span class="params">()</span> {
                    @Override
                    public void onReceiveValue <span class="params">(JSONObject value)</span> {

                    }
                })</span>;

                gameAPI.login <span class="params">(null, new ValueCallback&lt;JSONObject&gt; <span class="params">()</span> {
                    @Override
                    public void onReceiveValue <span class="params">(JSONObject value)</span> {

                    }
                })</span>;
            } catch <span class="params">(ClassNotFoundException e)</span> {
                e.printStackTrace <span class="params">()</span>;
            } catch <span class="params">(InstantiationException e)</span> {
                e.printStackTrace <span class="params">()</span>;
            } catch <span class="params">(IllegalAccessException e)</span> {
                e.printStackTrace <span class="params">()</span>;
            }
</code></pre><p> æœ¬åšå®¢æºç åœ°å€:<a href="https://github.com/fanOfDemo/HotUpdateSDK" target="_blank" rel="external">HotUpdateSDK</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://fanofdemo.github.io/2016/07/07/andoridæ’ä»¶åŒ–ç ”ç©¶/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="yiming">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://tc.sinaimg.cn/maxwidth.2048/tc.service.weibo.com/p/mmbiz_qpic_cn/1f005a6a2af0cfd626f3b5cefb3e4617.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="yiming">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="yiming" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/07/andoridæ’ä»¶åŒ–ç ”ç©¶/" itemprop="url">
                  andoridæ’ä»¶åŒ–ç ”ç©¶
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              <time title="Ğ”Ğ°Ñ‚Ğ° ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸" itemprop="dateCreated datePublished" datetime="2016-07-07T09:51:09+08:00">
                Jul 7 2016
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2016/07/07/andoridæ’ä»¶åŒ–ç ”ç©¶/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/07/07/andoridæ’ä»¶åŒ–ç ”ç©¶/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>ä¸€ã€<a href="https://github.com/DroidPluginTeam/DroidPlugin" target="_blank" rel="external">å¥‡è™å¼€æºæ’ä»¶åŒ–æ¡†æ¶ï¼ˆåŸºäºHook PMS AMSçš„launcheræ€è·¯ï¼‰</a></p>
<p><a href="https://github.com/tiann/understand-plugin-framework" target="_blank" rel="external">é’ˆå¯¹å¥‡è™å¼€æºæ’ä»¶åŒ–æ¡†æ¶çš„åŸºç¡€è®²è§£Hook é™æ€ä»£ç†ï¼ŒåŠ¨æ€ä»£ç†ï¼ŒPMSï¼ŒAMS<br>æºç åŠhookæ€è·¯è®²è§£ </a></p>
<pre><code>ä¼˜ç‚¹ï¼š
å®¿ä¸»æ’ä»¶å®Œå…¨åˆ†ç¦»ï¼Œè·¨è¿›ç¨‹çš„æ²™ç®±ç¯å¢ƒï¼ŒåŸºäºlauncherçš„å¯åŠ¨æµç¨‹ï¼Œé€šè¿‡æ¬ºéª—ç³»ç»Ÿçš„å¯åŠ¨æµç¨‹çš„æ€è·¯å¯åŠ¨æ’ä»¶apkï¼Œäºç³»ç»Ÿæ¥è¯´å®¿ä¸»å°±æ˜¯ä¸€ä¸ªlauncherï¼Œç›¸å¯¹äºä»£ç†çš„æ–¹å¼æ›´å¯é å®‰å…¨
ç¼ºç‚¹ï¼š
1ã€ä¸æ”¯æŒæ’ä»¶çš„notifycation
2ã€éœ€è¦æ¡†æ¶çš„ä½¿ç”¨è€…å®ç°å®¿ä¸»å’Œæ’ä»¶çš„è·¯ç”±åè®®ï¼Œä»¥ä¾¿è·¨è¿›ç¨‹é€šè®¯
</code></pre><p>äºŒã€<a href="https://github.com/singwhatiwanna/dynamic-load-apk" target="_blank" rel="external">ç™¾åº¦çš„é™æ€ä»£ç†å®ç°çš„åŠ¨æ€åŠ è½½ï¼ˆé™æ€ä»£ç†ï¼‰</a></p>
<pre><code>ä¼˜ç‚¹ï¼šæ˜“æ‡‚ã€ä¸Šæ‰‹ç®€å•ã€é€‚åˆè½»é‡çº§æ’ä»¶
ç¼ºç‚¹ï¼š
<span class="number">1</span>ã€æ’ä»¶ä»£ç éœ€è¦æ”¯æŒ<span class="keyword">that</span>è¯­æ³•ä»¥ä¾›å®¿ä¸»è¯†åˆ«
<span class="number">2</span>ã€ä¸æ”¯æŒæ’ä»¶ä¸­çš„æ•°æ®åº“
<span class="number">3</span>ã€æ’ä»¶ä¸­<span class="keyword">that</span>è¯­æ³•åœ¨å¤æ‚çš„activityç»§æ‰¿å…³ç³»ä¸­éš¾ä»¥ç»´æŠ¤
<span class="number">4</span>ã€ä¸æ”¯æŒactivityå’ŒfragmentActivityä»¥å¤–çš„activityï¼Œæ‰‹åŠ¨å¢åŠ å…¶å®ƒactivityçš„æ”¯æŒä¼šé€ æˆå¤§é‡çš„ä»£ç†ï¼Œé¢å¤–å¢åŠ å¤§é‡å†…å­˜æ¶ˆè€—ä»¥åŠä¸å¯æ§æ€§ï¼Œä¸é€‚åˆè¾ƒå¤§çš„æ’ä»¶
</code></pre><p>ä¸‰ã€<a href="https://github.com/houkx/android-pluginmgr" target="_blank" rel="external">åˆ©ç”¨ä»£ç ç”Ÿæˆæœºåˆ¶åŠ¨æ€ç”Ÿæˆä»£ç çš„æ’ä»¶åŒ–æ–¹æ¡ˆï¼ˆåŠ¨æ€ä»£ç†åŠåŠ¨æ€ä»£ç ç”Ÿæˆï¼‰</a></p>
<pre><code>åŸç†å’Œä¸Šé¢çš„é™æ€ä»£ç†ç±»ä¼¼ï¼Œä¸åŒä¹‹å¤„åœ¨äºä¸Šé¢ä½¿ç”¨æ‰‹åŠ¨ä»£ç†å¹¶åŠ è½½æ’ä»¶ä¸­activityï¼Œæ­¤æ¡†æ¶åˆ©ç”¨dexmakeræ¡†æ¶å®ç°äº†å¤åˆ¶æ’ä»¶ä»£ç å¹¶åœ¨å®¿ä¸»ä¸­ç”ŸæˆäºŒè¿›åˆ¶çš„ä»£ç ä»¥å®ç°æ’ä»¶åŒ–
</code></pre><p>å››ã€<a href="https://github.com/kaedea/android-dynamical-loading" target="_blank" rel="external">android-dynamical-loading</a><br>ç–‘ä¼¼æ¥è‡ªBç«™çš„ç»„ä»¶åŒ–ä¸‹è½½åŠè¡Œä¸ºè§„èŒƒæ–¹æ¡ˆï¼Œæ’ä»¶åŒ–æœªå®Œæˆï¼ˆç›®å‰æ˜¯å®ç°äº†æ’ä»¶çš„ä¸‹è½½å’Œæ ¡éªŒï¼Œä»¥åŠå°è¯•å¯¹æ’ä»¶å’Œå®¿ä¸»åˆ¶å®šç»Ÿä¸€çº¦æŸå’Œè§„èŒƒï¼‰</p>
<pre><code>åªåšäº†åŸºç¡€çš„ç»„ä»¶åŒ–æ–¹æ¡ˆï¼Œæ¡†æ¶æœ¬èº«å¹¶ä¸æ”¯æŒåŠ¨æ€åŠ è½½activityå’Œ<span class="keyword">service</span>ç­‰ç­‰ï¼Œå¦‚æ¡†æ¶ä½œè€…æ‰€è¯´ï¼Œæ­¤æ¡†æ¶é€‚åˆè®¾è®¡è‡ªå®šä¹‰çš„ç»„ä»¶åŒ–åŒ…ï¼Œæ¯”å¦‚è„±ç¦»androidç”Ÿå‘½çš„ç±»ï¼Œæ— acitivtyæˆ–<span class="keyword">service</span>çš„sdkç­‰ç­‰ï¼Œæ¯”å¦‚<span class="constant">B</span>ç«™çš„æ’­æ”¾å™¨æ ¸å¿ƒsoåŒ…çš„é¢‘ç¹æ›´æ–°é€‚åˆç”¨äºåŠ¨æ€åŠ è½½ï¼Œè¯è¯´å›æ¥ï¼Œé€‚ä¸é€‚åˆæŠ€æœ¯è¯´äº†ä¹Ÿæ²¡ç”¨å•Šï¼Œäº§å“å°±è¦è¿™ä¹ˆå¹²ä¹Ÿæ²¡åŠæ³•
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="http://tc.sinaimg.cn/maxwidth.2048/tc.service.weibo.com/p/mmbiz_qpic_cn/1f005a6a2af0cfd626f3b5cefb3e4617.jpg"
               alt="yiming" />
          <p class="site-author-name" itemprop="name">yiming</p>
          <p class="site-description motion-element" itemprop="description">æ¶è¡¥åŸºç¡€çŸ¥è¯†ä¸­...</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">21</span>
              <span class="site-state-item-name">æ—¥å¿—</span>
            </a>
          </div>

          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">11</span>
                <span class="site-state-item-name">æ ‡ç­¾</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/fanOfDemo" target="_blank" title="github">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  github
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/wengyiming" target="_blank" title="weibo">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  weibo
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              å‹æƒ…é“¾æ¥
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="https://github.com/XXApple/AndroidLibs" title="Androidå¼€æºä»£ç å¤§å…¨" target="_blank">Androidå¼€æºä»£ç å¤§å…¨</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.colorfulcat.xyz/?from=androidcat" title="å¤§èŠ±çŒ«" target="_blank">å¤§èŠ±çŒ«</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://androidcat.com/" title="androidç´ æä¹¦ç­¾" target="_blank">androidç´ æä¹¦ç­¾</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://dev2patrick.com/" title="patrick" target="_blank">patrick</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://aimeow.com/" title="aimeow" target="_blank">aimeow</a>
                </li>
              
            </ul>
          </div>
        

        


      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2013 - 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">yiming</span>
</div>


<div class="powered-by">
  ç”± <a class="theme-link" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨
</div>

<div class="theme-info">
  ä¸»é¢˜ -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"emin"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  








  
  

  

  

  

  


</body>
</html>
